{"ast":null,"code":"import _objectSpread from\"/Users/serhiimaistrenko/react/Kapusta-smart-finance/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{useForm}from'react-hook-form';import DarkModal from'components/DarkModal/DarkModal';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{AmountInput,BalanceFormWrapper,ConfirmBtn,Form,TitleBalance}from'./Balance.styled';import{useEffect}from'react';import{getSid,getUserBalance}from'Redux/kapustaSlice';import{useDispatch,useSelector}from'react-redux';import{changeBalance,getUser}from'Redux/userOperations';import{ErrorMessage,ErrorPositionWrapper}from'../Form/Inputs/DescriptionInput/DescriptionInput.styled';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var schema=yup.object({newBalance:yup.number().min(1).max(1000000000).required('please enter your balance')}).required();var Balance=function Balance(){var _useSelector;var dispatch=useDispatch();var sid=useSelector(getSid);var balance=(_useSelector=useSelector(getUserBalance))!==null&&_useSelector!==void 0?_useSelector:'';useEffect(function(){if(sid)dispatch(getUser());},[dispatch,sid]);var _useForm=useForm({// defaultValues: {\n//   newBalance: balance,\n// },\nmode:'onChange',resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset,errors=_useForm.formState.errors;var onSubmit=function onSubmit(data){dispatch(changeBalance(data));reset();};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(BalanceFormWrapper,{children:[/*#__PURE__*/_jsx(TitleBalance,{children:\"Balance:\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(ErrorPositionWrapper,{children:[/*#__PURE__*/_jsx(AmountInput,_objectSpread(_objectSpread({},register('newBalance')),{},{name:\"newBalance\",type:\"text\"// value={balance}\n,placeholder:\"\".concat(balance,\".00 UAH\")})),balance===0&&/*#__PURE__*/_jsx(DarkModal,{}),(errors===null||errors===void 0?void 0:errors.newBalance)&&/*#__PURE__*/_jsx(ErrorMessage,{children:'this field is required and must be a number'})]}),/*#__PURE__*/_jsx(ConfirmBtn,{type:\"submit\",children:\"Confirm\"})]})]})});};export default Balance;","map":{"version":3,"names":["React","useForm","DarkModal","yupResolver","yup","AmountInput","BalanceFormWrapper","ConfirmBtn","Form","TitleBalance","useEffect","getSid","getUserBalance","useDispatch","useSelector","changeBalance","getUser","ErrorMessage","ErrorPositionWrapper","schema","object","newBalance","number","min","max","required","Balance","dispatch","sid","balance","mode","resolver","register","handleSubmit","reset","errors","formState","onSubmit","data"],"sources":["/Users/serhiimaistrenko/react/Kapusta-smart-finance/src/components/Expenses/Balance/Balance.jsx"],"sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport DarkModal from 'components/DarkModal/DarkModal';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport {\n  AmountInput,\n  BalanceFormWrapper,\n  ConfirmBtn,\n  Form,\n  TitleBalance,\n} from './Balance.styled';\nimport { useEffect } from 'react';\nimport { getSid, getUserBalance } from 'Redux/kapustaSlice';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { changeBalance, getUser } from 'Redux/userOperations';\nimport {\n  ErrorMessage,\n  ErrorPositionWrapper,\n} from '../Form/Inputs/DescriptionInput/DescriptionInput.styled';\n\nconst schema = yup\n  .object({\n    newBalance: yup\n      .number()\n      .min(1)\n      .max(1000000000)\n      .required('please enter your balance'),\n  })\n  .required();\n\nconst Balance = () => {\n  const dispatch = useDispatch();\n  const sid = useSelector(getSid);\n  const balance = useSelector(getUserBalance) ?? '';\n\n  useEffect(() => {\n    if (sid) dispatch(getUser());\n  }, [dispatch, sid]);\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState: { errors },\n  } = useForm({\n    // defaultValues: {\n    //   newBalance: balance,\n    // },\n    mode: 'onChange',\n    resolver: yupResolver(schema),\n  });\n\n  const onSubmit = data => {\n    dispatch(changeBalance(data));\n    reset();\n  };\n\n  return (\n    <>\n      <BalanceFormWrapper>\n        <TitleBalance>Balance:</TitleBalance>\n        <Form onSubmit={handleSubmit(onSubmit)}>\n          <ErrorPositionWrapper>\n            <AmountInput\n              {...register('newBalance')}\n              name=\"newBalance\"\n              type=\"text\"\n              // value={balance}\n              placeholder={`${balance}.00 UAH`}\n            />\n            {balance === 0 && <DarkModal />}\n            {errors?.newBalance && (\n              <ErrorMessage>\n                {'this field is required and must be a number'}\n              </ErrorMessage>\n            )}\n          </ErrorPositionWrapper>\n          <ConfirmBtn type=\"submit\">Confirm</ConfirmBtn>\n        </Form>\n      </BalanceFormWrapper>\n    </>\n  );\n};\n\nexport default Balance;\n"],"mappings":"wIAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAOC,UAAS,KAAM,gCAAgC,CACtD,OAASC,WAAW,KAAQ,yBAAyB,CACrD,MAAO,GAAKC,IAAG,KAAM,KAAK,CAC1B,OACEC,WAAW,CACXC,kBAAkB,CAClBC,UAAU,CACVC,IAAI,CACJC,YAAY,KACP,kBAAkB,CACzB,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,MAAM,CAAEC,cAAc,KAAQ,oBAAoB,CAC3D,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,aAAa,CAAEC,OAAO,KAAQ,sBAAsB,CAC7D,OACEC,YAAY,CACZC,oBAAoB,KACf,yDAAyD,CAAC,6IAEjE,GAAMC,OAAM,CAAGf,GAAG,CACfgB,MAAM,CAAC,CACNC,UAAU,CAAEjB,GAAG,CACZkB,MAAM,EAAE,CACRC,GAAG,CAAC,CAAC,CAAC,CACNC,GAAG,CAAC,UAAU,CAAC,CACfC,QAAQ,CAAC,2BAA2B,CACzC,CAAC,CAAC,CACDA,QAAQ,EAAE,CAEb,GAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,kBACpB,GAAMC,SAAQ,CAAGd,WAAW,EAAE,CAC9B,GAAMe,IAAG,CAAGd,WAAW,CAACH,MAAM,CAAC,CAC/B,GAAMkB,QAAO,eAAGf,WAAW,CAACF,cAAc,CAAC,6CAAI,EAAE,CAEjDF,SAAS,CAAC,UAAM,CACd,GAAIkB,GAAG,CAAED,QAAQ,CAACX,OAAO,EAAE,CAAC,CAC9B,CAAC,CAAE,CAACW,QAAQ,CAAEC,GAAG,CAAC,CAAC,CAEnB,aAKI3B,OAAO,CAAC,CACV;AACA;AACA;AACA6B,IAAI,CAAE,UAAU,CAChBC,QAAQ,CAAE5B,WAAW,CAACgB,MAAM,CAC9B,CAAC,CAAC,CAVAa,QAAQ,UAARA,QAAQ,CACRC,YAAY,UAAZA,YAAY,CACZC,KAAK,UAALA,KAAK,CACQC,MAAM,UAAnBC,SAAS,CAAID,MAAM,CASrB,GAAME,SAAQ,CAAG,QAAXA,SAAQ,CAAGC,IAAI,CAAI,CACvBX,QAAQ,CAACZ,aAAa,CAACuB,IAAI,CAAC,CAAC,CAC7BJ,KAAK,EAAE,CACT,CAAC,CAED,mBACE,sCACE,MAAC,kBAAkB,yBACjB,KAAC,YAAY,WAAC,UAAQ,EAAe,cACrC,MAAC,IAAI,EAAC,QAAQ,CAAED,YAAY,CAACI,QAAQ,CAAE,wBACrC,MAAC,oBAAoB,yBACnB,KAAC,WAAW,gCACNL,QAAQ,CAAC,YAAY,CAAC,MAC1B,IAAI,CAAC,YAAY,CACjB,IAAI,CAAC,MACL;AAAA,CACA,WAAW,WAAKH,OAAO,WAAU,GACjC,CACDA,OAAO,GAAK,CAAC,eAAI,KAAC,SAAS,IAAG,CAC9B,CAAAM,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEd,UAAU,gBACjB,KAAC,YAAY,WACV,6CAA6C,EAEjD,GACoB,cACvB,KAAC,UAAU,EAAC,IAAI,CAAC,QAAQ,UAAC,SAAO,EAAa,GACzC,GACY,EACpB,CAEP,CAAC,CAED,cAAeK,QAAO"},"metadata":{},"sourceType":"module"}