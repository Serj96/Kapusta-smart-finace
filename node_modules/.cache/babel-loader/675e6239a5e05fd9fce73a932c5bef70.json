{"ast":null,"code":"import _asyncToGenerator from\"/Users/serhiimaistrenko/react/Kapusta-smart-finance/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/serhiimaistrenko/react/Kapusta-smart-finance/node_modules/@babel/runtime/regenerator/index.js\";import{createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';axios.defaults.baseURL='https://kapusta-backend.goit.global';var setToken=function setToken(token){if(token){return axios.defaults.headers.common.authorization=\"Bearer \".concat(token);}axios.defaults.headers.common.authorization='';};export var getUser=createAsyncThunk('user',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_,_ref){var rejectWithValue,getState,state,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rejectWithValue=_ref.rejectWithValue,getState=_ref.getState;state=getState();setToken(state.kapusta.accessToken);_context.prev=3;_context.next=6;return axios.get('/user');case 6:_yield$axios$get=_context.sent;data=_yield$axios$get.data;return _context.abrupt(\"return\",data);case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);return _context.abrupt(\"return\",rejectWithValue(_context.t0));case 14:case\"end\":return _context.stop();}}},_callee,null,[[3,11]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var changeBalance=createAsyncThunk('user/balance',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(credentials,_ref3){var rejectWithValue,getState,state,_yield$axios$patch,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rejectWithValue=_ref3.rejectWithValue,getState=_ref3.getState;state=getState();setToken(state.kapusta.accessToken);_context2.prev=3;_context2.next=6;return axios.patch('/user/balance',credentials);case 6:_yield$axios$patch=_context2.sent;data=_yield$axios$patch.data;return _context2.abrupt(\"return\",data);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);return _context2.abrupt(\"return\",rejectWithValue(_context2.t0));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());var userOperations={getUser:getUser,changeBalance:changeBalance};export default userOperations;","map":{"version":3,"names":["createAsyncThunk","axios","defaults","baseURL","setToken","token","headers","common","authorization","getUser","_","rejectWithValue","getState","state","kapusta","accessToken","get","data","changeBalance","credentials","patch","userOperations"],"sources":["/Users/serhiimaistrenko/react/Kapusta-smart-finance/src/Redux/userOperations.js"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\naxios.defaults.baseURL = 'https://kapusta-backend.goit.global';\n\nconst setToken = token => {\n  if (token) {\n    return (axios.defaults.headers.common.authorization = `Bearer ${token}`);\n  }\n  axios.defaults.headers.common.authorization = '';\n};\n\nexport const getUser = createAsyncThunk(\n  'user',\n  async (_, { rejectWithValue, getState }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.get('/user');\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const changeBalance = createAsyncThunk(\n  'user/balance',\n  async (credentials, { rejectWithValue, getState }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.patch('/user/balance', credentials);\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nconst userOperations = {\n  getUser,\n  changeBalance,\n};\nexport default userOperations;\n"],"mappings":"qRAAA,OAASA,gBAAgB,KAAQ,kBAAkB,CACnD,MAAOC,MAAK,KAAM,OAAO,CAEzBA,KAAK,CAACC,QAAQ,CAACC,OAAO,CAAG,qCAAqC,CAE9D,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAGC,KAAK,CAAI,CACxB,GAAIA,KAAK,CAAE,CACT,MAAQJ,MAAK,CAACC,QAAQ,CAACI,OAAO,CAACC,MAAM,CAACC,aAAa,kBAAaH,KAAK,CAAE,CACzE,CACAJ,KAAK,CAACC,QAAQ,CAACI,OAAO,CAACC,MAAM,CAACC,aAAa,CAAG,EAAE,CAClD,CAAC,CAED,MAAO,IAAMC,QAAO,CAAGT,gBAAgB,CACrC,MAAM,2FACN,iBAAOU,CAAC,gLAAIC,eAAe,MAAfA,eAAe,CAAEC,QAAQ,MAARA,QAAQ,CAC7BC,KAAK,CAAGD,QAAQ,EAAE,CACxBR,QAAQ,CAACS,KAAK,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,sCAEXd,MAAK,CAACe,GAAG,CAAC,OAAO,CAAC,uCAAjCC,IAAI,kBAAJA,IAAI,iCACLA,IAAI,4FAEJN,eAAe,aAAO,uEAEhC,oEACF,CAED,MAAO,IAAMO,cAAa,CAAGlB,gBAAgB,CAC3C,cAAc,2FACd,kBAAOmB,WAAW,uLAAIR,eAAe,OAAfA,eAAe,CAAEC,QAAQ,OAARA,QAAQ,CACvCC,KAAK,CAAGD,QAAQ,EAAE,CACxBR,QAAQ,CAACS,KAAK,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,wCAEXd,MAAK,CAACmB,KAAK,CAAC,eAAe,CAAED,WAAW,CAAC,0CAAxDF,IAAI,oBAAJA,IAAI,kCACLA,IAAI,gGAEJN,eAAe,cAAO,yEAEhC,qEACF,CAED,GAAMU,eAAc,CAAG,CACrBZ,OAAO,CAAPA,OAAO,CACPS,aAAa,CAAbA,aACF,CAAC,CACD,cAAeG,eAAc"},"metadata":{},"sourceType":"module"}