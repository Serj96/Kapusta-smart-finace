{"ast":null,"code":"import _slicedToArray from\"/Users/serhiimaistrenko/react/Kapusta-smart-finance/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/serhiimaistrenko/react/Kapusta-smart-finance/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{memo}from\"react\";import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend}from'chart.js';import ChartDataLabels from'chartjs-plugin-datalabels';import{Bar}from'react-chartjs-2';import{StatsWrapper}from\"./StatsReposrt.styled\";import{useMediaQuery}from\"react-responsive\";import{useLocation}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{getIconsData}from\"Redux/kapustaSlice\";import{CloseSvg}from\"components/ModalWindowNav/ModalWindowNav.styled\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StatsReport=function StatsReport(){var _arr,_arr$;var iconData=useSelector(getIconsData);var newObj={};var _useLocation=useLocation(),pathname=_useLocation.pathname;if(iconData.id!==null){if(pathname===\"/home/reports\"){var expensesData=iconData.data.map(function(item){return item.expenses.expensesData;});expensesData.forEach(function(item){newObj=item;});newObj=newObj[iconData.id];}if(pathname===\"/home/reports/income\"){var incomesData=iconData.data.map(function(item){return item.incomes.incomesData;});incomesData.forEach(function(item){newObj=item;});newObj=newObj[iconData.id];}}var isMobScreen=useMediaQuery({query:'(max-width: 767.98px)'});var isTabScreen=useMediaQuery({query:'(min-width: 768px)'});var isBeforeDescScreen=useMediaQuery({query:'(max-width: 1279.98px)'});var isAfterDescScreen=useMediaQuery({query:'(min-width: 1280px)'});ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend,ChartDataLabels);var normalObj=_objectSpread({},newObj);delete normalObj.total;var sortableObj=Object.fromEntries(Object.entries(normalObj).sort(function(_ref,_ref2){var _ref3=_slicedToArray(_ref,2),a=_ref3[1];var _ref4=_slicedToArray(_ref2,2),b=_ref4[1];return b-a;}));var arr=Object.values(sortableObj);var arrLabel=Object.keys(sortableObj).filter(function(item){return item!=='total';});var chartData={labels:arrLabel,datasets:[{barThickness:isMobScreen?15:38,label:'Amount',data:arr,backgroundColor:arr.map(function(el,idx){return idx===0?'#FF751D':idx%3?'#FFDAC0':'#FF751D';})}]};var options={barPercentage:0.7,maintainAspectRatio:false,layout:{padding:30,fullSize:true},responsive:true,scales:{x:{border:{display:false},grid:{display:false},ticks:{display:true}},y:{border:{display:false},ticks:{display:false,scaleBeginAtZero:true,min:(_arr=arr[arr.length-1])===null||_arr===void 0?void 0:_arr.total,max:((_arr$=arr[0])===null||_arr$===void 0?void 0:_arr$.total)*1.2},grid:{display:true,drawBorder:false,showBorder:false,lineWidth:2,drawTicks:false,color:'#F5F6FB'}}},plugins:{legend:{display:false},datalabels:{color:\"black\",font:{family:'arial',size:12},anchor:\"end\",clamp:true,align:\"top\",formatter:function formatter(value,context){return value+'UAH';}}},elements:{bar:{borderRadius:10}}};if(isMobScreen){options.layout.padding=25;options.indexAxis='y';options.maintainAspectRatio=false;options.scales.x.grid.display=false;options.scales.x.ticks.display=false;options.scales.y.grid.display=false;options.scales.y.ticks.display=true;options.plugins.datalabels.offset=7;options.plugins.datalabels.font.size=10;options.plugins.datalabels.align='top';options.plugins.datalabels.anchor='end';options.scales.y.ticks.mirror=true;options.scales.y.ticks.labelOffset=-17;}if(isTabScreen){options.elements.bar.borderRadius=10;}return/*#__PURE__*/_jsxs(StatsWrapper,{children:[isMobScreen&&/*#__PURE__*/_jsx(Bar,{plugins:[ChartDataLabels],options:options,data:chartData}),isTabScreen&&isBeforeDescScreen&&/*#__PURE__*/_jsx(Bar,{plugins:[ChartDataLabels],options:options,data:chartData}),isAfterDescScreen&&/*#__PURE__*/_jsx(Bar,{plugins:[ChartDataLabels],options:options,data:chartData})]});};export default/*#__PURE__*/memo(StatsReport);","map":{"version":3,"names":["memo","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","ChartDataLabels","Bar","StatsWrapper","useMediaQuery","useLocation","useSelector","getIconsData","CloseSvg","StatsReport","iconData","newObj","pathname","id","expensesData","data","map","item","expenses","forEach","incomesData","incomes","isMobScreen","query","isTabScreen","isBeforeDescScreen","isAfterDescScreen","register","normalObj","total","sortableObj","Object","fromEntries","entries","sort","a","b","arr","values","arrLabel","keys","filter","chartData","labels","datasets","barThickness","label","backgroundColor","el","idx","options","barPercentage","maintainAspectRatio","layout","padding","fullSize","responsive","scales","x","border","display","grid","ticks","y","scaleBeginAtZero","min","length","max","drawBorder","showBorder","lineWidth","drawTicks","color","plugins","legend","datalabels","font","family","size","anchor","clamp","align","formatter","value","context","elements","bar","borderRadius","indexAxis","offset","mirror","labelOffset"],"sources":["/Users/serhiimaistrenko/react/Kapusta-smart-finance/src/components/StatsReport/StatsReport.jsx"],"sourcesContent":["import { memo } from \"react\";\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { Bar } from 'react-chartjs-2';\nimport { StatsWrapper } from \"./StatsReposrt.styled\";\nimport { useMediaQuery } from \"react-responsive\";\nimport { useLocation } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { getIconsData } from \"Redux/kapustaSlice\";\nimport { CloseSvg } from \"components/ModalWindowNav/ModalWindowNav.styled\";\nconst StatsReport = () => {\n  const iconData = useSelector(getIconsData)\n  let newObj = {};\n  const { pathname } = useLocation();\n  if (iconData.id !== null) {\n    if (pathname === \"/home/reports\") {\n      const expensesData = iconData.data.map(item => item.expenses.expensesData);\n      expensesData.forEach(item => {\n        newObj = item;\n      });\n      newObj = newObj[iconData.id];\n    }\n    if (pathname === \"/home/reports/income\") {\n      const incomesData = iconData.data.map(item => item.incomes.incomesData);\n      incomesData.forEach(item => {\n        newObj = item;\n      });\n      newObj = newObj[iconData.id];\n    }\n  }\n  const isMobScreen = useMediaQuery({ query: '(max-width: 767.98px)' });\n  const isTabScreen = useMediaQuery({ query: '(min-width: 768px)' });\n  const isBeforeDescScreen = useMediaQuery({ query: '(max-width: 1279.98px)' });\n  const isAfterDescScreen = useMediaQuery({ query: '(min-width: 1280px)' });\n  \n  ChartJS.register(\n    CategoryScale,\n    LinearScale,\n    BarElement,\n    Title,\n    Tooltip,\n    Legend,\n    ChartDataLabels\n  );\n\n  const normalObj = { ...newObj };\n  delete normalObj.total;\n\n  const sortableObj = Object.fromEntries(\n    Object.entries(normalObj).sort(([,a],[,b]) => b-a)\n  );\n\n  const arr = Object.values(sortableObj);\n  const arrLabel = Object.keys(sortableObj).filter(item => item !== 'total');\n\n  const chartData = {\n    labels: arrLabel,\n    datasets: [{\n      barThickness: isMobScreen ? 15 : 38,\n      label: 'Amount',\n      data: arr,\n      backgroundColor: arr.map((el, idx) => idx === 0 ? '#FF751D' : ((idx) % 3) ? '#FFDAC0' : '#FF751D'),\n    }],\n  };\n  const options = {\n    barPercentage: 0.7,\n    maintainAspectRatio: false,\n    layout: {\n      padding: 30,\n      fullSize: true,\n    },\n    responsive: true,\n    scales: {\n      x: {\n         border: {\n          display: false,\n        },\n        grid: {\n          display: false,\n        },\n        ticks: {\n          display: true,\n        }\n      },\n      y: {\n        border: {\n          display: false,\n        },\n        ticks: {\n          display: false,\n          scaleBeginAtZero: true,\n          min: arr[arr.length - 1]?.total,\n          max: arr[0]?.total * 1.2,\n\n        },\n        grid: {\n          display: true,\n          drawBorder: false,\n          showBorder: false,\n          lineWidth: 2,\n          drawTicks: false,\n          color: '#F5F6FB',\n        }\n      },\n\n    },\n    plugins: {\n      legend: {\n        display: false,\n      },\n      datalabels: {\n        color: \"black\",\n        font: {\n          family: 'arial',\n          size: 12,\n        },\n        anchor: \"end\",\n        clamp: true,\n        align: \"top\",\n        formatter: function (value, context) {\n          return value + 'UAH';\n        },\n      }\n    },\n    elements: {\n      bar: {\n        borderRadius: 10,\n      }\n    }\n  }\n\n  if (isMobScreen) {\n    options.layout.padding = 25;\n    options.indexAxis = 'y';\n    options.maintainAspectRatio = false;\n    options.scales.x.grid.display = false;\n    options.scales.x.ticks.display = false;\n    options.scales.y.grid.display = false;\n    options.scales.y.ticks.display = true;\n    options.plugins.datalabels.offset = 7;\n    options.plugins.datalabels.font.size = 10;\n    options.plugins.datalabels.align = 'top';\n    options.plugins.datalabels.anchor = 'end';\n    \n    options.scales.y.ticks.mirror = true;\n    options.scales.y.ticks.labelOffset = -17;\n  }\n\n  if (isTabScreen) {\n    options.elements.bar.borderRadius = 10;\n  }\n\n  return (\n    <StatsWrapper>\n      {isMobScreen && <Bar plugins={[ChartDataLabels]} options={options} data={chartData} />}\n      {isTabScreen && isBeforeDescScreen && <Bar plugins={[ChartDataLabels]} options={options} data={chartData} />}\n      {isAfterDescScreen && <Bar plugins={[ChartDataLabels]} options={options} data={chartData} />}\n    </StatsWrapper >\n  )\n\n}\n\n\n\nexport default memo(StatsReport);"],"mappings":"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"},"metadata":{},"sourceType":"module"}