{"ast":null,"code":"import _objectSpread from\"/Users/serhiimaistrenko/react/Kapusta-smart-finance/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{FormProvider,useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import{FaArrowLeft}from'react-icons/fa';import{useMediaQuery}from'react-responsive';import{ClearButton,SubmitButton}from'components/Theme/Button/Button';import DescriptionInput from'./Inputs/DescriptionInput/DescriptionInput';import AmountInput from'./Inputs/AmountInput/AmountInput';import CategoryInput from'./Inputs/CategoryInput/CategoryInput';import{useLocation,useNavigate}from'react-router-dom';import DateInput from'./Inputs/DateInput/DateInput';import{BackLink,BtnWrapper,FormStyle,InputsWrapper}from'./Form.styled';import{useDispatch,useSelector}from'react-redux';import{addExpense,addIncome}from'Redux/transactionOperation';import{getDateInput}from'Redux/kapustaSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var schema=yup.object({description:yup.string().required('This field is required'),amount:yup.number().integer().min(1).max(1000000000).required('This field is required'),category:yup.string().required('Select category')}).required();export var Form=function Form(){var dateInput=useSelector(getDateInput);var isMobScreen=useMediaQuery({query:'(max-width: 767.98px)'});var isTabScreen=useMediaQuery({query:'(min-width: 768px)'});var navigate=useNavigate();var location=useLocation();var dispatch=useDispatch();var methods=useForm({mode:'onChange',defaultValues:{description:'',category:''},resolver:yupResolver(schema)});var handleSubmit=methods.handleSubmit,reset=methods.reset,setValue=methods.setValue,isSubmitSuccessful=methods.formState.isSubmitSuccessful;var onSubmit=function onSubmit(data){var formData=_objectSpread({date:dateInput},data);var key=location.pathname;if(key==='/home/expenses')dispatch(addExpense(formData));if(key==='/home/income')dispatch(addIncome(formData));setValue('category',null);reset();if(isMobScreen&&isSubmitSuccessful)return navigate('/home');};return/*#__PURE__*/_jsxs(_Fragment,{children:[isMobScreen&&/*#__PURE__*/_jsx(BackLink,{to:'/home',children:/*#__PURE__*/_jsx(FaArrowLeft,{width:'18px',height:'12px'})}),/*#__PURE__*/_jsx(FormProvider,_objectSpread(_objectSpread({},methods),{},{children:/*#__PURE__*/_jsxs(FormStyle,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(InputsWrapper,{children:[isTabScreen&&/*#__PURE__*/_jsx(DateInput,{}),/*#__PURE__*/_jsx(DescriptionInput,{}),/*#__PURE__*/_jsx(CategoryInput,{}),/*#__PURE__*/_jsx(AmountInput,{})]}),/*#__PURE__*/_jsxs(BtnWrapper,{children:[/*#__PURE__*/_jsx(SubmitButton,{type:'submit',children:\"Input\"}),/*#__PURE__*/_jsx(ClearButton,{reset:reset})]})]})}))]});};export default Form;","map":{"version":3,"names":["FormProvider","useForm","yupResolver","yup","FaArrowLeft","useMediaQuery","ClearButton","SubmitButton","DescriptionInput","AmountInput","CategoryInput","useLocation","useNavigate","DateInput","BackLink","BtnWrapper","FormStyle","InputsWrapper","useDispatch","useSelector","addExpense","addIncome","getDateInput","schema","object","description","string","required","amount","number","integer","min","max","category","Form","dateInput","isMobScreen","query","isTabScreen","navigate","location","dispatch","methods","mode","defaultValues","resolver","handleSubmit","reset","setValue","isSubmitSuccessful","formState","onSubmit","data","formData","date","key","pathname"],"sources":["/Users/serhiimaistrenko/react/Kapusta-smart-finance/src/components/Expenses/Form/Form.jsx"],"sourcesContent":["import { FormProvider, useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { FaArrowLeft } from 'react-icons/fa';\nimport { useMediaQuery } from 'react-responsive';\n\nimport { ClearButton, SubmitButton } from 'components/Theme/Button/Button';\nimport DescriptionInput from './Inputs/DescriptionInput/DescriptionInput';\nimport AmountInput from './Inputs/AmountInput/AmountInput';\nimport CategoryInput from './Inputs/CategoryInput/CategoryInput';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport DateInput from './Inputs/DateInput/DateInput';\nimport { BackLink, BtnWrapper, FormStyle, InputsWrapper } from './Form.styled';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addExpense, addIncome } from 'Redux/transactionOperation';\nimport { getDateInput } from 'Redux/kapustaSlice';\n\nconst schema = yup\n  .object({\n    description: yup.string().required('This field is required'),\n    amount: yup\n      .number()\n      .integer()\n      .min(1)\n      .max(1000000000)\n      .required('This field is required'),\n    category: yup.string().required('Select category'),\n  })\n  .required();\n\nexport const Form = () => {\n  const dateInput = useSelector(getDateInput);\n\n  const isMobScreen = useMediaQuery({ query: '(max-width: 767.98px)' });\n  const isTabScreen = useMediaQuery({ query: '(min-width: 768px)' });\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const dispatch = useDispatch();\n\n  const methods = useForm({\n    mode: 'onChange',\n    defaultValues: {\n      description: '',\n      category: '',\n    },\n    resolver: yupResolver(schema),\n  });\n\n  const {\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { isSubmitSuccessful },\n  } = methods;\n\n  const onSubmit = data => {\n    const formData = {\n      date: dateInput,\n      ...data,\n    };\n\n    const key = location.pathname;\n\n    if (key === '/home/expenses') dispatch(addExpense(formData));\n\n    if (key === '/home/income') dispatch(addIncome(formData));\n\n    setValue('category', null);\n\n    reset();\n\n    if (isMobScreen && isSubmitSuccessful) return navigate('/home');\n  };\n\n  return (\n    <>\n      {isMobScreen && (\n        <BackLink to={'/home'}>\n          <FaArrowLeft width={'18px'} height={'12px'} />\n        </BackLink>\n      )}\n      <FormProvider {...methods}>\n        <FormStyle onSubmit={handleSubmit(onSubmit)}>\n          <InputsWrapper>\n            {isTabScreen && <DateInput />}\n            <DescriptionInput />\n            <CategoryInput />\n            <AmountInput />\n          </InputsWrapper>\n          <BtnWrapper>\n            <SubmitButton type={'submit'}>Input</SubmitButton>\n            <ClearButton reset={reset} />\n          </BtnWrapper>\n        </FormStyle>\n      </FormProvider>\n    </>\n  );\n};\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}