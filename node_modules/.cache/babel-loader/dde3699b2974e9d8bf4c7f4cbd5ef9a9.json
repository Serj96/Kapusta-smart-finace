{"ast":null,"code":"import _asyncToGenerator from\"/Users/serhiimaistrenko/react/Kapusta-smart-finance/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/serhiimaistrenko/react/Kapusta-smart-finance/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import{createAsyncThunk}from'@reduxjs/toolkit';import userOperations from'Redux/userOperations';axios.defaults.baseURL='https://kapusta-backend.goit.global';var setToken=function setToken(token){if(token){return axios.defaults.headers.common.authorization=\"Bearer \".concat(token);}axios.defaults.headers.common.authorization='';};export var addIncome=createAsyncThunk('transaction/income/add',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(credentials,_ref){var rejectWithValue,getState,dispatch,state,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rejectWithValue=_ref.rejectWithValue,getState=_ref.getState,dispatch=_ref.dispatch;state=getState();setToken(state.kapusta.accessToken);_context.prev=3;_context.next=6;return axios.post('/transaction/income',credentials);case 6:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch(getIncome());return _context.abrupt(\"return\",data);case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);return _context.abrupt(\"return\",rejectWithValue(_context.t0));case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,12]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var getIncome=createAsyncThunk('transaction/income',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_,_ref3){var rejectWithValue,getState,state,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rejectWithValue=_ref3.rejectWithValue,getState=_ref3.getState;state=getState();setToken(state.kapusta.accessToken);_context2.prev=3;_context2.next=6;return axios.get('/transaction/income');case 6:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;return _context2.abrupt(\"return\",data);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);return _context2.abrupt(\"return\",rejectWithValue(_context2.t0));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());export var addExpense=createAsyncThunk('transaction/expense/add',/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(credentials,_ref5){var rejectWithValue,getState,dispatch,state,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:rejectWithValue=_ref5.rejectWithValue,getState=_ref5.getState,dispatch=_ref5.dispatch;state=getState();setToken(state.kapusta.accessToken);_context3.prev=3;_context3.next=6;return axios.post('/transaction/expense',credentials);case 6:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;dispatch(getExpense());return _context3.abrupt(\"return\",data);case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](3);return _context3.abrupt(\"return\",rejectWithValue(_context3.t0));case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[3,12]]);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}());export var getExpense=createAsyncThunk('transaction/expense',/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_,_ref7){var rejectWithValue,getState,state,_yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:rejectWithValue=_ref7.rejectWithValue,getState=_ref7.getState;state=getState();setToken(state.kapusta.accessToken);_context4.prev=3;_context4.next=6;return axios.get('/transaction/expense');case 6:_yield$axios$get2=_context4.sent;data=_yield$axios$get2.data;return _context4.abrupt(\"return\",data);case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](3);return _context4.abrupt(\"return\",rejectWithValue(_context4.t0));case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[3,11]]);}));return function(_x7,_x8){return _ref8.apply(this,arguments);};}());export var deleteTransaction=createAsyncThunk('transaction/delete',/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(transactionId,_ref9){var rejectWithValue,dispatch,getState,state,_yield$axios$delete,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:rejectWithValue=_ref9.rejectWithValue,dispatch=_ref9.dispatch,getState=_ref9.getState;state=getState();setToken(state.kapusta.accessToken);_context5.prev=3;_context5.next=6;return axios.delete(\"/transaction/\".concat(transactionId));case 6:_yield$axios$delete=_context5.sent;data=_yield$axios$delete.data;dispatch(getExpense());dispatch(getIncome());dispatch(userOperations.getUser());return _context5.abrupt(\"return\",data);case 14:_context5.prev=14;_context5.t0=_context5[\"catch\"](3);return _context5.abrupt(\"return\",rejectWithValue(_context5.t0));case 17:case\"end\":return _context5.stop();}}},_callee5,null,[[3,14]]);}));return function(_x9,_x10){return _ref10.apply(this,arguments);};}());export var getIncomeCategories=createAsyncThunk('transaction/income-categories',/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_,_ref11){var rejectWithValue,getState,state,_yield$axios$get3,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:rejectWithValue=_ref11.rejectWithValue,getState=_ref11.getState;state=getState();setToken(state.kapusta.accessToken);_context6.prev=3;_context6.next=6;return axios.get('/transaction/income-categories');case 6:_yield$axios$get3=_context6.sent;data=_yield$axios$get3.data;return _context6.abrupt(\"return\",data);case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](3);return _context6.abrupt(\"return\",rejectWithValue(_context6.t0));case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[3,11]]);}));return function(_x11,_x12){return _ref12.apply(this,arguments);};}());export var getExpenseCategories=createAsyncThunk('transaction/expense-categories',/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(_,_ref13){var rejectWithValue,getState,state,_yield$axios$get4,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:rejectWithValue=_ref13.rejectWithValue,getState=_ref13.getState;state=getState();setToken(state.kapusta.accessToken);_context7.prev=3;_context7.next=6;return axios.get('/transaction/expense-categories');case 6:_yield$axios$get4=_context7.sent;data=_yield$axios$get4.data;return _context7.abrupt(\"return\",data);case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](3);return _context7.abrupt(\"return\",rejectWithValue(_context7.t0));case 14:case\"end\":return _context7.stop();}}},_callee7,null,[[3,11]]);}));return function(_x13,_x14){return _ref14.apply(this,arguments);};}());export var getTransactionsByPeriod=createAsyncThunk('transaction/period-data',/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(date,_ref15){var rejectWithValue,getState,state,_yield$axios$get5,data;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:rejectWithValue=_ref15.rejectWithValue,getState=_ref15.getState;state=getState();setToken(state.kapusta.accessToken);_context8.prev=3;_context8.next=6;return axios.get(\"/transaction/period-data?date=\".concat(date));case 6:_yield$axios$get5=_context8.sent;data=_yield$axios$get5.data;return _context8.abrupt(\"return\",data);case 11:_context8.prev=11;_context8.t0=_context8[\"catch\"](3);return _context8.abrupt(\"return\",rejectWithValue(_context8.t0));case 14:case\"end\":return _context8.stop();}}},_callee8,null,[[3,11]]);}));return function(_x15,_x16){return _ref16.apply(this,arguments);};}());var transactionOperations={addIncome:addIncome,getIncome:getIncome,addExpense:addExpense,getExpense:getExpense,deleteTransaction:deleteTransaction,getIncomeCategories:getIncomeCategories,getExpenseCategories:getExpenseCategories,getTransactionsByPeriod:getTransactionsByPeriod};export default transactionOperations;","map":{"version":3,"names":["axios","createAsyncThunk","userOperations","defaults","baseURL","setToken","token","headers","common","authorization","addIncome","credentials","rejectWithValue","getState","dispatch","state","kapusta","accessToken","post","data","getIncome","_","get","addExpense","getExpense","deleteTransaction","transactionId","delete","getUser","getIncomeCategories","getExpenseCategories","getTransactionsByPeriod","date","transactionOperations"],"sources":["/Users/serhiimaistrenko/react/Kapusta-smart-finance/src/Redux/transactionOperation.js"],"sourcesContent":["import axios from 'axios';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport userOperations from 'Redux/userOperations';\n\naxios.defaults.baseURL = 'https://kapusta-backend.goit.global';\n\nconst setToken = token => {\n  if (token) {\n    return (axios.defaults.headers.common.authorization = `Bearer ${token}`);\n  }\n  axios.defaults.headers.common.authorization = '';\n};\n\nexport const addIncome = createAsyncThunk(\n  'transaction/income/add',\n  async (credentials, { rejectWithValue, getState, dispatch }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.post('/transaction/income', credentials);\n      dispatch(getIncome());\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const getIncome = createAsyncThunk(\n  'transaction/income',\n  async (_, { rejectWithValue, getState }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.get('/transaction/income');\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const addExpense = createAsyncThunk(\n  'transaction/expense/add',\n  async (credentials, { rejectWithValue, getState, dispatch }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.post('/transaction/expense', credentials);\n      dispatch(getExpense());\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const getExpense = createAsyncThunk(\n  'transaction/expense',\n  async (_, { rejectWithValue, getState }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.get('/transaction/expense');\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const deleteTransaction = createAsyncThunk(\n  'transaction/delete',\n  async (transactionId, { rejectWithValue, dispatch, getState }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.delete(`/transaction/${transactionId}`);\n      dispatch(getExpense());\n      dispatch(getIncome());\n      dispatch(userOperations.getUser());\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const getIncomeCategories = createAsyncThunk(\n  'transaction/income-categories',\n  async (_, { rejectWithValue, getState }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.get('/transaction/income-categories');\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const getExpenseCategories = createAsyncThunk(\n  'transaction/expense-categories',\n  async (_, { rejectWithValue, getState }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.get('/transaction/expense-categories');\n\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const getTransactionsByPeriod = createAsyncThunk(\n  'transaction/period-data',\n  async (date, { rejectWithValue, getState }) => {\n    const state = getState();\n    setToken(state.kapusta.accessToken);\n    try {\n      const { data } = await axios.get(`/transaction/period-data?date=${date}`);\n      return data;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nconst transactionOperations = {\n  addIncome,\n  getIncome,\n  addExpense,\n  getExpense,\n  deleteTransaction,\n  getIncomeCategories,\n  getExpenseCategories,\n  getTransactionsByPeriod,\n};\n\nexport default transactionOperations;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}